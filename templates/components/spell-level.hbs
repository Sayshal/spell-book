{{!--
/**
 * Spell Level Grouping Component Template
 *
 * PURPOSE:
 * Reusable component for organizing and displaying spells by level with collapsible
 * sections. Provides consistent spell level presentation across the application
 * with expandable/collapsible functionality, spell counts, and support for
 * partial block content through Handlebars composition patterns.
 *
 * CONTEXT REQUIREMENTS:
 * @param {number} level - Numeric spell level (0-9, where 0 represents cantrips)
 * @param {string} levelName - Localized display name for the spell level
 * @param {Array<Object>} spells - Array of spell objects for this level
 * @partial-block {Object} spell - Individual spell object passed to partial content
 *
 * ACCESSIBILITY FEATURES:
 * - Collapsible header with role="button" for keyboard accessibility
 * - ARIA attributes (aria-expanded, aria-controls) for screen reader support
 * - Descriptive aria-label for spell count information
 * - List structure with role="list" for proper semantic navigation
 * - Visual collapse indicator marked as decorative
 *
 * CUSTOMIZATION POINTS:
 * - Spell level content provided through partial block composition
 * - Collapse/expand state managed through aria-expanded attribute
 * - Spell count displays current number of spells at this level
 * - Level identification through data-level attribute for styling/scripting
 *
 * INTEGRATION:
 * - Used across spell display templates for consistent level organization
 * - Supports both player spell book and spell list manager contexts
 * - Integrates with collapse/expand functionality through data-action
 * - Provides flexible content through partial block pattern
 * - Works with spell filtering and search systems
 */
--}}

<div class="spell-level" data-level="{{level}}">
	<h3 class="spell-level-heading" data-action="toggleSpellLevel" data-level="{{level}}" role="button"
		aria-expanded="{{#unless isCollapsed}}true{{else}}false{{/unless}}" aria-controls="spell-list-{{level}}" style="">
		<i class="fas fa-caret-{{#if isCollapsed}}right{{else}}down{{/if}} collapse-indicator" aria-hidden="true"></i>
		{{levelName}}
		<span class="spell-count" aria-label="Spell Count">({{preparedCount}}/{{spells.length}})</span>
		{{#if cantripCounter.enabled}}
			<span class="cantrip-counter"
				title="Current/Maximum Cantrips">[{{cantripCounter.current}}/{{cantripCounter.maximum}}]</span>
		{{/if}}
	</h3>
	<ul class="spell-list" id="spell-list-{{level}}" {{#if isCollapsed}}style="display: none;" {{/if}} role="list">
		{{#each spells as |spell|}}
			{{> "modules/spell-book/templates/components/spell-item.hbs" spell=spell}}
		{{/each}}
	</ul>
</div>
