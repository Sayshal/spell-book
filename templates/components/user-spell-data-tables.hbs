{{!--
/**
 * User Spell Data Tables Component Template
 *
 * PURPOSE:
 * Template for displaying populated user spell data including favorites, usage
 * statistics, and personal notes. Renders complete tables with actual data for
 * spell tracking analytics. Provides different content for GM vs player views
 * with comprehensive spell data presentation.
 *
 * CONTEXT REQUIREMENTS:
 * @param {boolean} isGM - Whether current user has GM permissions
 * @param {Array<Object>} userActors - Array of user's actor data with spell information
 * @param {string} userActors[].id - Actor identifier for data tables
 * @param {string} userActors[].name - Actor display name
 * @param {Array<Object>} userActors[].favoriteSpells - Array of favorited spells
 * @param {string} userActors[].favoriteSpells[].uuid - Spell unique identifier
 * @param {string} userActors[].favoriteSpells[].name - Spell display name
 * @param {Array<Object>} userActors[].usageSpells - Array of used spells with statistics
 * @param {string} userActors[].usageSpells[].uuid - Spell unique identifier
 * @param {string} userActors[].usageSpells[].name - Spell display name
 * @param {Object} userActors[].usageSpells[].stats - Usage statistics object
 * @param {Object} userActors[].usageSpells[].stats.contextUsage - Context-specific usage counts
 * @param {number} userActors[].usageSpells[].stats.contextUsage.combat - Combat usage count
 * @param {number} userActors[].usageSpells[].stats.contextUsage.exploration - Exploration usage count
 * @param {number} userActors[].usageSpells[].stats.count - Total usage count
 * @param {string} userActors[].usageSpells[].lastUsedDate - Formatted last used date
 * @param {string} userId - Current user identifier for notes table
 * @param {Array<Object>} notesSpells - Array of spells with user notes
 * @param {string} notesSpells[].uuid - Spell unique identifier
 * @param {string} notesSpells[].name - Spell display name
 * @param {string} notesSpells[].notes - User's notes for the spell
 * @param {string} favoritesTitle - Localized title for favorites section
 * @param {string} usageTitle - Localized title for usage tracking section
 * @param {string} notesTitle - Localized title for notes section
 * @param {string} spellCol - Localized column header for spell names
 * @param {string} favoritedCol - Localized column header for favorited status
 * @param {string} combatCol - Localized column header for combat usage
 * @param {string} explorationCol - Localized column header for exploration usage
 * @param {string} totalCol - Localized column header for total usage
 * @param {string} lastUsedCol - Localized column header for last used date
 * @param {string} notesCol - Localized column header for spell notes
 *
 * ACCESSIBILITY FEATURES:
 * - Semantic heading structure (h1, h2) for content organization
 * - Proper table structure with thead/tbody sections
 * - Table headers with appropriate scope for screen readers
 * - Data attributes for spell identification and interaction
 * - Horizontal rules for content separation
 *
 * CUSTOMIZATION POINTS:
 * - GM view shows minimal content with auto-generation notice
 * - Player view displays complete spell data across all categories
 * - Tables populated with actual user spell interaction data
 * - Usage statistics broken down by context (combat/exploration)
 * - Personal notes displayed with full content
 *
 * INTEGRATION:
 * - Used in analytics dashboard for users with existing spell data
 * - Displays actual spell interaction history and preferences
 * - Connects to user data tracking and analytics systems
 * - Supports data export and analysis functionality
 */
--}}

<!-- Content Separator -->
<hr>

<!-- Page Description -->
<p><em>{{localize 'SPELLBOOK.UserData.PageDescription'}}</em></p>

{{#if isGM}}
  <!-- GM View - Minimal Content -->
  <p><small><em>{{localize 'SPELLBOOK.UserData.AutoGenerated'}}</em></small></p>
{{else}}
  <!-- Player View - Populated Data Tables -->
  {{#each userActors as |actor|}}
    <hr>

    <!-- Actor Spell Data Section -->
    <div class="actor-spell-data" data-actor-id="{{actor.id}}">
      <!-- Actor Name Header -->
      <h1>{{actor.name}}</h1>

      <!-- Spell Favorites Table with Data -->
      <h2>{{../favoritesTitle}}</h2>
      <table class="spell-book-data" data-table-type="spell-favorites" data-actor-id="{{actor.id}}">
        <thead>
          <tr>
            <th>{{../spellCol}}</th>
            <th>{{../favoritedCol}}</th>
          </tr>
        </thead>
        <tbody>
          {{#each actor.favoriteSpells as |spell|}}
            <tr data-spell-uuid="{{spell.uuid}}">
              <td>{{spell.name}}</td>
              <td>Yes</td>
            </tr>
          {{/each}}
        </tbody>
      </table>

      <!-- Spell Usage Statistics Table with Data -->
      <h2>{{../usageTitle}}</h2>
      <table class="spell-book-data" data-table-type="spell-usage" data-actor-id="{{actor.id}}">
        <thead>
          <tr>
            <th>{{../spellCol}}</th>
            <th>{{../combatCol}}</th>
            <th>{{../explorationCol}}</th>
            <th>{{../totalCol}}</th>
            <th>{{../lastUsedCol}}</th>
          </tr>
        </thead>
        <tbody>
          {{#each actor.usageSpells as |spell|}}
            <tr data-spell-uuid="{{spell.uuid}}">
              <td>{{spell.name}}</td>
              <td>{{spell.stats.contextUsage.combat}}</td>
              <td>{{spell.stats.contextUsage.exploration}}</td>
              <td>{{spell.stats.count}}</td>
              <td>{{spell.lastUsedDate}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  {{/each}}

  <hr>

  <!-- Global Spell Notes Section with Data -->
  <h1>{{notesTitle}}</h1>
  <p><em>{{localize 'SPELLBOOK.UserData.NotesDescription'}}</em></p>
  <table class="spell-book-data" data-table-type="spell-notes" data-user-id="{{userId}}">
    <thead>
      <tr>
        <th>{{spellCol}}</th>
        <th>{{notesCol}}</th>
      </tr>
    </thead>
    <tbody>
      {{#each notesSpells as |spell|}}
        <tr data-spell-uuid="{{spell.uuid}}">
          <td>{{spell.name}}</td>
          <td>{{spell.notes}}</td>
        </tr>
      {{/each}}
    </tbody>
  </table>

  <hr>

  <!-- Auto-Generation Notice -->
  <p><small><em>{{localize 'SPELLBOOK.UserData.AutoGenerated'}}</em></small></p>
{{/if}}
