<!-- Middle Content: Selected spell list -->
<section class="selected-list-content">
	{{#if selectedSpellList}}
		<div class="selected-list-header">
			<div class="header-title">
				<h2>{{selectedSpellList.name}}</h2>
			</div>
			<div class="header-buttons">
				{{#unless isEditing}}
					<button type="button" class="edit-button" data-action="editSpellList" data-uuid="{{selectedSpellList.uuid}}">
						<i class="fas fa-edit"></i> {{localize "SPELLMANAGER.Buttons.Edit"}}
					</button>
				{{else}}
					{{#if isCustomList}}
						<div class="custom-list-controls">
							{{#if compareInfo.hasOriginalChanged}}
								<span class="update-notice">{{localize "SPELLMANAGER.Status.UpdateNotice"}}</span>
							{{/if}}
							<button type="button" class="restore-button" data-action="restoreOriginal"
								data-uuid="{{selectedSpellList.uuid}}">
								<i class="fas fa-sync"></i> {{localize "SPELLMANAGER.Buttons.Restore"}}
							</button>
							<button type="button" class="delete-button" data-action="deleteCustomList"
								data-uuid="{{selectedSpellList.uuid}}">
								<i class="fas fa-trash"></i> {{localize "SPELLMANAGER.Buttons.Delete"}}
							</button>

							<button type="button" class="save-button" data-action="saveCustomList"
								data-uuid="{{selectedSpellList.uuid}}">
								<i class="fas fa-save"></i> {{localize "SPELLMANAGER.Buttons.Save"}}
							</button>
						</div>
					{{/if}}

				{{/unless}}
			</div>
		</div>
		<div class="selected-list-spells">
			{{#if selectedSpellList.isLoadingSpells}}
				<div class="spell-loading">
					<i class="fas fa-spinner fa-spin fa-2x"></i>
					<p>{{localize "SPELLMANAGER.Application.LoadingSpells"}}</p>
				</div>
			{{else if selectedSpellList.hasError}}
				<p class="spell-error">{{localize "SPELLMANAGER.Application.SpellsError"}}</p>
			{{else if selectedSpellList.spells.length}}
				<div class="spells-container">
					{{#each selectedSpellList.spellsByLevel as |levelData|}}
						<div class="spell-level" data-level="{{levelData.level}}">
							<h3 class="spell-level-heading" data-action="toggleSpellLevel">
								<i class="fas fa-caret-down collapse-indicator"></i>
								{{levelData.levelName}}
								<span class="spell-count">({{levelData.spells.length}})</span>
							</h3>
							<ul class="spell-list">
								{{#each levelData.spells as |spell|}}
									<li class="spell-item" data-uuid="{{spell.uuid}}">
										<div class="spell-name">
											<img src="{{spell.img}}" class="spell-icon" alt="{{spell.name}} icon">
											<div class="name-stacked">
												<span class="title">{{spell.name}}</span>
												<span class="subtitle">{{spell.formattedDetails}}</span>
											</div>
										</div>
										{{#if @root.isEditing}}
											<div class="spell-preparation">
												<button type="button" class="remove-spell" data-action="removeSpell" data-uuid="{{spell.uuid}}">
													<i class="fas fa-times"></i>
												</button>
											</div>
										{{/if}}
									</li>
								{{/each}}
							</ul>
						</div>
					{{/each}}
				</div>
			{{else}}
				<p class="no-spells">
					{{#if isEditing}}{{localize "SPELLMANAGER.Columns.AddSpellsPrompt"}}{{else}}{{localize "SPELLMANAGER.Columns.NoSpells"}}{{/if}}
				</p>
			{{/if}}
		</div>
	{{else}}
		<div class="no-selection">
			<p>{{localize "SPELLMANAGER.Columns.NoListSelected"}}</p>
		</div>
	{{/if}}
</section>
