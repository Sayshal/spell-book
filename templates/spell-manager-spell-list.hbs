<div class="spell-list-container">
  <div class="spell-list-header">
    {{#if selectedClass}}
      <h2>{{selectedClass.label}} Spell List</h2>
      <div class="spell-list-controls">
        {{#if activeList}}
          <button type="button" class="save-list" data-action="saveList">
            <i class="fas fa-save"></i> {{localize "spell-book.ui.saveList"}}
          </button>
        {{else}}
          <button type="button" class="create-list" data-action="createSpellList">
            <i class="fas fa-plus"></i> {{localize "spell-book.ui.createNewList"}}
          </button>
        {{/if}}
      </div>
    {{else}}
      <h2>{{localize "spell-book.ui.selectClass"}}</h2>
    {{/if}}
  </div>

  <div class="spell-list-content">
    {{#if selectedClass}}
      {{#if hasSelectedSpells}}
        {{#each selectedByLevel as |levelData lvl|}}
          <div class="spell-level-group">
            <h3>{{levelData.label}} ({{levelData.spells.length}})</h3>
            <ul class="spell-list level-{{lvl}}">
              {{#each levelData.spells as |spell|}}
                <li class="spell-item" data-spell-id="{{spell.id}}">
                  <div class="spell-info">
                    <span class="spell-name">{{{spell.nameDisplay}}}</span>
                    <span class="spell-school">{{spellInfo spell}}</span>
                  </div>
                  <div class="spell-actions">
                    <button class="remove-spell" data-action="removeSpell">
                      <i class="fas fa-minus-circle"></i>
                    </button>
                  </div>
                </li>
              {{/each}}
            </ul>
          </div>
        {{/each}}
      {{else}}
        <p class="no-spells">{{localize "spell-book.ui.noSpellsSelected"}}</p>
      {{/if}}
    {{else}}
      <p class="select-class-prompt">{{localize "spell-book.ui.selectClass"}}</p>
    {{/if}}
  </div>
</div>
