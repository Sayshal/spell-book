{{!--
/**
 * Spell List Manager Spell Lists Sidebar Template
 *
 * PURPOSE:
 * Navigation sidebar for the spell list manager displaying all available spell lists
 * organized by type and functionality. Provides list selection, visibility management,
 * and organizational tools for comprehensive spell list management across different
 * categories including player spellbooks, custom lists, merged lists, and system lists.
 *
 * CONTEXT REQUIREMENTS:
 * @param {boolean} hasActorOwnedLists - Whether actor-owned spellbooks exist
 * @param {Array<Object>} actorOwnedLists - Player spellbook collections
 * @param {boolean} hasCustomLists - Whether custom spell lists exist
 * @param {Array<Object>} customLists - User-created custom spell lists
 * @param {boolean} hasMergedLists - Whether merged spell lists exist
 * @param {Array<Object>} mergedLists - Combined spell list collections
 * @param {boolean} hasStandardLists - Whether standard system lists exist
 * @param {Array<Object>} standardLists - System-provided class spell lists
 * @param {boolean} hasHiddenLists - Whether hidden spell lists exist
 * @param {Array<Object>} hiddenSpellLists - Lists hidden from main view
 * @param {Array<Object>} availableSpellLists - Complete collection of available lists
 * @param {Object} customListMap - Map for checking custom list relationships
 *
 * Each list object contains:
 * @param {string} list.uuid - Unique identifier for the spell list
 * @param {string} list.name - Display name for the spell list
 * @param {number} list.spellCount - Number of spells in the list
 * @param {string} list.pack - Source compendium pack name
 * @param {boolean} list.isCustom - Whether list is user-created
 * @param {boolean} list.isMerged - Whether list is merged from multiple sources
 * @param {string} list.actorName - Actor name for player spellbooks
 * @param {string} list.identifier - Custom identifier for custom lists
 *
 * HELPER DEPENDENCIES:
 * @requires localize - Foundry VTT localization helper for text translation
 * @requires if - Handlebars conditional helper for section visibility
 * @requires each - Handlebars iteration helper for list collections
 * @requires unless - Handlebars inverse conditional helper
 * @requires lookup - Handlebars object property lookup helper
 * @requires > - Handlebars partial inclusion helper for shared components
 *
 * ACCESSIBILITY FEATURES:
 * - Complementary sidebar role with descriptive aria-label
 * - Collapsible sidebar with aria-expanded state management
 * - List structures with role="list" and role="listitem" for navigation
 * - Button elements with comprehensive aria-label attributes
 * - Tooltip attributes for additional context information
 * - Folder structures with proper header and content relationships
 *
 * CUSTOMIZATION POINTS:
 * - List sections display conditionally based on data availability
 * - Folder icons and styling adapt to list types
 * - Visibility toggle controls adapt to list capabilities
 * - List metadata displays appropriate source information
 * - Empty state shows when no lists are available
 *
 * INTEGRATION:
 * - Connects to SpellListManager application for list navigation
 * - Uses module localization keys from SPELLMANAGER namespace
 * - Supports list visibility management and organization
 * - Integrates with list merging and creation workflows
 * - Works with folder collapse/expand functionality
 */
--}}

<div class="spell-lists-sidebar card" role="complementary"
	aria-label="{{localize 'SPELLMANAGER.Columns.AvailableLists'}}">

	<!-- Sidebar Collapse Control -->
	<button type="button" class="sidebar-collapser collapser vertical" data-action="toggleSidebar"
		aria-label="{{localize 'SPELLMANAGER.Buttons.HideLists'}}" aria-expanded="true">
		<i class="fas fa-caret-left collapse-indicator" aria-hidden="true"></i>
	</button>

	<!-- Lists Header - Title and primary actions -->
	<div class="lists-header">
		<!-- Merge Lists Action Button -->
		<button type="button" class="merge-lists-button" data-action="mergeLists"
			aria-label="{{localize 'SPELLMANAGER.Buttons.MergeLists'}}"
			data-tooltip="{{localize 'SPELLMANAGER.Tooltips.MergeLists'}}">
			<i class="fas fa-code-merge" aria-hidden="true"></i>
		</button>

		<!-- Section Header -->
		<h2 id="available-lists-heading">{{localize "SPELLMANAGER.Columns.AvailableLists"}}</h2>

		<!-- Create New List Action Button -->
		<button type="button" class="create-new-button" data-action="createNewList"
			aria-label="{{localize 'SPELLMANAGER.Buttons.CreateNew'}}"
			data-tooltip="{{localize 'SPELLMANAGER.Tooltips.CreateNew'}}">
			<i class="fas fa-plus" aria-hidden="true"></i>
		</button>
	</div>

	<!-- Lists Container - Organized spell list navigation -->
	<div class="lists-container" role="list" aria-labelledby="available-lists-heading">

		<!-- Player Spellbooks Section - Actor-owned spell lists -->
		{{#if hasActorOwnedLists}}
			<div class="list-folder actor-lists-folder" data-folder-id="actor-lists">
				<div class="folder-header" data-action="toggleFolder"
					data-tooltip="{{localize 'SPELLMANAGER.Tooltips.PlayerSpellbooksFolder'}}">
					<i class="fas fa-chevron-down collapse-indicator" aria-hidden="true"></i>
					<i class="fas fa-user folder-icon" aria-hidden="true"></i>
					<span>{{localize "SPELLMANAGER.Folders.PlayerSpellbooks"}}</span>
				</div>
				<ul class="spell-list-items folder-content">
					{{#each actorOwnedLists as |list|}}
						<li class="spell-list-item actor-owned-list {{#if list.isCustom}}custom-list{{/if}}"
							data-uuid="{{list.uuid}}" role="listitem"
							data-tooltip="{{localize 'SPELLMANAGER.Tooltips.ActorSpellbook' actorName=list.actorName}}"
							aria-label="{{list.name}} - {{localize 'SPELLMANAGER.Status.SpellCount' count=list.spellCount}} - {{list.pack}}">
							<div class="list-item-header">
								<div class="list-item-content" data-action="selectSpellList" data-uuid="{{list.uuid}}">
									<div class="list-name">
										<i class="fas fa-book {{#if list.isCustom}}is-custom-list{{else if (lookup ../customListMap list.uuid)}}has-custom-version{{/if}}"
											aria-hidden="true"></i>
										<span>{{list.name}}</span>
									</div>
									<div class="list-meta">
										<span class="spell-count">{{localize "SPELLMANAGER.Status.SpellCount" count=list.spellCount}}</span>
										<span class="meta-separator" aria-hidden="true">•</span>
										<span
											class="source">{{#if list.actorName}}{{list.actorName}}{{else}}{{localize "SPELLMANAGER.ListSource.Character"}}{{/if}}</span>
									</div>
								</div>
								<!-- Actor spellbooks cannot be hidden, so no visibility toggle -->
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
		{{/if}}

		<!-- Custom Spell Lists Section - User-created lists -->
		{{#if hasCustomLists}}
			<div class="list-folder custom-lists-folder" data-folder-id="custom-lists">
				<div class="folder-header" data-action="toggleFolder"
					data-tooltip="{{localize 'SPELLMANAGER.Tooltips.CustomListsFolder'}}">
					<i class="fas fa-chevron-down collapse-indicator" aria-hidden="true"></i>
					<i class="fas fa-magic folder-icon" aria-hidden="true"></i>
					<span>{{localize "SPELLMANAGER.Folders.CustomLists"}}</span>
				</div>
				<ul class="spell-list-items folder-content">
					{{#each customLists as |list|}}
						<li class="spell-list-item custom-list" data-uuid="{{list.uuid}}" role="listitem"
							data-tooltip="{{localize 'SPELLMANAGER.Tooltips.CustomList' identifier=list.identifier}}"
							aria-label="{{list.name}} - {{localize 'SPELLMANAGER.Status.SpellCount' count=list.spellCount}} - {{localize 'SPELLMANAGER.ListSource.Custom'}}">
							<div class="list-item-header">
								<div class="list-item-content" data-action="selectSpellList" data-uuid="{{list.uuid}}">
									<div class="list-name">
										<i class="fas fa-book is-custom-list" aria-hidden="true"></i>
										<span>{{list.name}}</span>
									</div>
									<div class="list-meta">
										<span class="spell-count">{{localize "SPELLMANAGER.Status.SpellCount" count=list.spellCount}}</span>
										<span class="meta-separator" aria-hidden="true">•</span>
										<span class="source">{{localize "SPELLMANAGER.ListSource.Custom"}}</span>
									</div>
								</div>
								<button type="button" class="visibility-toggle" data-action="toggleListVisibility"
									data-uuid="{{list.uuid}}" aria-label="{{localize 'SPELLMANAGER.HideList.Hide' name=list.name}}"
									data-tooltip="{{localize 'SPELLMANAGER.HideList.HideTooltip'}}">
									<i class="fas fa-eye" aria-hidden="true"></i>
								</button>
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
		{{/if}}

		<!-- Merged Spell Lists Section - Combined lists from multiple sources -->
		{{#if hasMergedLists}}
			<div class="list-folder merged-lists-folder" data-folder-id="merged-lists">
				<div class="folder-header" data-action="toggleFolder"
					data-tooltip="{{localize 'SPELLMANAGER.Tooltips.MergedListsFolder'}}">
					<i class="fas fa-chevron-down collapse-indicator" aria-hidden="true"></i>
					<i class="fas fa-code-merge folder-icon" aria-hidden="true"></i>
					<span>{{localize "SPELLMANAGER.Folders.MergedLists"}}</span>
				</div>
				<ul class="spell-list-items folder-content">
					{{#each mergedLists as |list|}}
						<li class="spell-list-item merged-list" data-uuid="{{list.uuid}}" role="listitem"
							data-tooltip="{{localize 'SPELLMANAGER.Tooltips.MergedList'}}"
							aria-label="{{list.name}} - {{localize 'SPELLMANAGER.Status.SpellCount' count=list.spellCount}} - {{localize 'SPELLMANAGER.ListSource.Merged'}}">
							<div class="list-item-header">
								<div class="list-item-content" data-action="selectSpellList" data-uuid="{{list.uuid}}">
									<div class="list-name">
										<i class="fas fa-book is-merged-list" aria-hidden="true"></i>
										<span>{{list.name}}</span>
									</div>
									<div class="list-meta">
										<span class="spell-count">{{localize "SPELLMANAGER.Status.SpellCount" count=list.spellCount}}</span>
										<span class="meta-separator" aria-hidden="true">•</span>
										<span class="source">{{localize "SPELLMANAGER.ListSource.Merged"}}</span>
									</div>
								</div>
								<button type="button" class="visibility-toggle" data-action="toggleListVisibility"
									data-uuid="{{list.uuid}}" aria-label="{{localize 'SPELLMANAGER.HideList.Hide' name=list.name}}"
									data-tooltip="{{localize 'SPELLMANAGER.HideList.HideTooltip'}}">
									<i class="fas fa-eye" aria-hidden="true"></i>
								</button>
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
		{{/if}}

		<!-- Standard Spell Lists Section - System-provided class lists -->
		{{#if hasStandardLists}}
			<div class="list-folder standard-lists-folder" data-folder-id="standard-lists">
				<div class="folder-header" data-action="toggleFolder"
					data-tooltip="{{localize 'SPELLMANAGER.Tooltips.StandardListsFolder'}}">
					<i class="fas fa-chevron-down collapse-indicator" aria-hidden="true"></i>
					<i class="fas fa-scroll folder-icon" aria-hidden="true"></i>
					<span>{{localize "SPELLMANAGER.Folders.SpellLists"}}</span>
				</div>
				<ul class="spell-list-items folder-content">
					{{#each standardLists as |list|}}
						<li class="spell-list-item" data-uuid="{{list.uuid}}" role="listitem"
							data-tooltip="{{#if (lookup ../customListMap list.uuid)}}{{localize 'SPELLMANAGER.Tooltips.ModifiedList' class=list.name source=list.pack}}{{else}}{{localize 'SPELLMANAGER.Tooltips.StandardList' class=list.name source=list.pack}}{{/if}}"
							aria-label="{{list.name}} - {{localize 'SPELLMANAGER.Status.SpellCount' count=list.spellCount}} - {{list.pack}}">
							<div class="list-item-header">
								<div class="list-item-content" data-action="selectSpellList" data-uuid="{{list.uuid}}">
									<div class="list-name">
										<i class="fas fa-book {{#if (lookup ../customListMap list.uuid)}}has-custom-version{{/if}}"
											aria-hidden="true"></i>
										<span>{{list.name}}</span>
									</div>
									<div class="list-meta">
										<span class="spell-count">{{localize "SPELLMANAGER.Status.SpellCount" count=list.spellCount}}</span>
										<span class="meta-separator" aria-hidden="true">•</span>
										<span class="source">{{list.pack}}</span>
									</div>
								</div>
								<button type="button" class="visibility-toggle" data-action="toggleListVisibility"
									data-uuid="{{list.uuid}}" aria-label="{{localize 'SPELLMANAGER.HideList.Hide' name=list.name}}"
									data-tooltip="{{localize 'SPELLMANAGER.HideList.HideTooltip'}}">
									<i class="fas fa-eye" aria-hidden="true"></i>
								</button>
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
		{{/if}}

		<!-- Hidden Spell Lists Section - Lists hidden from main view -->
		{{#if hasHiddenLists}}
			<div class="list-folder hidden-lists-folder" data-folder-id="hidden-lists">
				<div class="folder-header" data-action="toggleFolder"
					data-tooltip="{{localize 'SPELLMANAGER.Tooltips.HiddenListsFolder'}}">
					<i class="fas fa-chevron-down collapse-indicator" aria-hidden="true"></i>
					<i class="fas fa-eye-slash folder-icon" aria-hidden="true"></i>
					<span>{{localize "SPELLMANAGER.Folders.HiddenLists"}}</span>
				</div>
				<ul class="spell-list-items folder-content">
					{{#each hiddenSpellLists as |list|}}
						<li
							class="spell-list-item hidden-list {{#if list.isCustom}}custom-list{{/if}} {{#if list.isMerged}}merged-list{{/if}}"
							data-uuid="{{list.uuid}}" role="listitem" data-tooltip="{{localize 'SPELLMANAGER.Tooltips.HiddenList'}}"
							aria-label="{{list.name}} - {{localize 'SPELLMANAGER.Status.SpellCount' count=list.spellCount}} - {{localize 'SPELLMANAGER.HideList.Hidden'}}">
							<div class="list-item-header">
								<div class="list-item-content" data-action="selectSpellList" data-uuid="{{list.uuid}}">
									<div class="list-name">
										<i class="fas fa-book {{#if list.isCustom}}is-custom-list{{else if list.isMerged}}is-merged-list{{else if (lookup ../customListMap list.uuid)}}has-custom-version{{/if}}"
											aria-hidden="true"></i>
										<span>{{list.name}}</span>
									</div>
									<div class="list-meta">
										<span class="spell-count">{{localize "SPELLMANAGER.Status.SpellCount" count=list.spellCount}}</span>
										<span class="meta-separator" aria-hidden="true">•</span>
										<span
											class="source">{{#if list.isMerged}}{{localize "SPELLMANAGER.ListSource.Merged"}}{{else if list.isCustom}}{{localize "SPELLMANAGER.ListSource.Custom"}}{{else}}{{list.pack}}{{/if}}</span>
									</div>
								</div>
								<button type="button" class="visibility-toggle" data-action="toggleListVisibility"
									data-uuid="{{list.uuid}}" aria-label="{{localize 'SPELLMANAGER.HideList.Unhide' name=list.name}}"
									data-tooltip="{{localize 'SPELLMANAGER.HideList.UnhideTooltip'}}">
									<i class="fas fa-eye-slash" aria-hidden="true"></i>
								</button>
							</div>
						</li>
					{{/each}}
				</ul>
			</div>
		{{/if}}

		<!-- Empty State - Shown when no lists are available -->
		{{#unless availableSpellLists.length}}
			{{> "modules/spell-book/templates/components/empty-state.hbs" message=(localize "SPELLMANAGER.Columns.NoLists")}}
		{{/unless}}
	</div>
</div>
