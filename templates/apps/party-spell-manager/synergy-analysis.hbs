{{!--
/**
 * Focus Settings Dialog Template
 *
 * PURPOSE:
 * Configuration dialog for managing spellcasting focus settings with different
 * interfaces for GM and player modes. GMs can create/edit focus options and
 * assign them to party members, while players can select their personal focus
 * from available options. Supports icon selection, descriptions, and assignments.
 *
 * CONTEXT REQUIREMENTS:
 * @param {boolean} isGMMode - Whether dialog is in GM management mode vs player selection
 * @param {Array<Object>} availableFocuses - Array of available focus options
 * @param {string} availableFocuses[].id - Unique focus identifier
 * @param {string} availableFocuses[].name - Focus display name
 * @param {string} availableFocuses[].description - Focus description text
 * @param {string} availableFocuses[].icon - Focus icon image path
 * @param {Array<Object>} partyMembers - Array of party member data (GM mode only)
 * @param {string} partyMembers[].id - Member user identifier
 * @param {string} partyMembers[].name - Member display name
 * @param {string} partyMembers[].actorName - Associated actor name (optional)
 * @param {string} partyMembers[].selectedFocus - Currently selected focus ID (optional)
 * @param {string} currentSelection - Current user's selected focus ID (player mode)
 *
 * DUAL FLAG SYSTEM INTEGRATION:
 * - GM Mode: Manages focus options and user assignments in group flags
 * - Player Mode: Updates personal selection in group flags, synced to actor flags
 * - Focus options stored by ID for data consistency
 * - Individual actor flags store focus names for backward compatibility
 *
 * WORKFLOW DIFFERENCES:
 * - GM Mode: Full CRUD operations on focus options + member assignments
 * - Player Mode: Simple selection interface with visual focus cards
 * - Both modes support icon selection and descriptions
 * - Form submission handles different data structures based on mode
 */
--}}

<div class="party-spell-analysis">
  <!-- Analysis Overview Section - Key statistical summary -->
  <div class="analysis-overview">
    <h3>{{localize "SPELLBOOK.Party.Analysis.Overview"}}</h3>

    <!-- Statistics Grid - Core party spell metrics -->
    <div class="stats-grid">
      <!-- Total Unique Spells Statistic -->
      <div class="stat-item">
        <span class="stat-label">{{localize "SPELLBOOK.Party.Analysis.TotalSpells"}}</span>
        <span class="stat-value">{{totalSpells}}</span>
      </div>

      <!-- Total Prepared Spells Statistic -->
      <div class="stat-item">
        <span class="stat-label">{{localize "SPELLBOOK.Party.Analysis.TotalPrepared"}}</span>
        <span class="stat-value">{{totalPreparedSpells}}</span>
      </div>

      <!-- Concentration Spells Analysis -->
      <div class="stat-item">
        <span class="stat-label">{{localize "SPELLBOOK.Party.Analysis.ConcentrationSpells"}}</span>
        <span class="stat-value">{{concentrationSpells}} ({{concentrationPercentage}}%)</span>
      </div>

      <!-- Ritual Spells Count -->
      <div class="stat-item">
        <span class="stat-label">{{localize "SPELLBOOK.Party.Analysis.RitualSpells"}}</span>
        <span class="stat-value">{{ritualSpells}}</span>
      </div>
    </div>
  </div>

  <!-- Damage Type Analysis Section - Optional based on data availability -->
  {{#if damageDistribution.length}}
    <div class="damage-analysis">
      <h4>{{localize "SPELLBOOK.Party.Analysis.DamageTypes"}}</h4>

      <!-- Damage Types Distribution Display -->
      <div class="damage-types">
        {{#each damageDistribution as |damageData|}}
          <div class="damage-type-item">
            <span class="damage-type">{{damageData.localizedType}}</span>
            <span class="damage-count">{{damageData.count}}</span>
          </div>
        {{/each}}
      </div>
    </div>
  {{/if}}

  <!-- Spellcasting Focus Analysis Section - Optional based on data availability -->
  {{#if focusDistribution.length}}
    <div class="focus-analysis">
      <h4>{{localize "SPELLBOOK.Party.Analysis.FocusDistribution"}}</h4>

      <!-- Focus Types Distribution Display -->
      <div class="focus-types">
        {{#each focusDistribution as |focusData|}}
          <div class="focus-type-item">
            <span class="focus-type">{{focusData.focus}}</span>
            <span class="focus-count">{{focusData.count}}</span>
          </div>
        {{/each}}
      </div>
    </div>
  {{/if}}

  <!-- Strategic Recommendations Section - Optional based on analysis results -->
  {{#if recommendations.length}}
    <div class="recommendations">
      <h4>{{localize "SPELLBOOK.Party.Analysis.Recommendations"}}</h4>

      <!-- Recommendations List - Localized strategic advice -->
      <ul class="recommendation-list">
        {{#each recommendations as |recommendation|}}
          <li>{{localize recommendation}}</li>
        {{/each}}
      </ul>
    </div>
  {{/if}}
</div>
