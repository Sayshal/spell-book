<div class="spellbook-settings-form">
  <h2>{{localize 'SPELLBOOK.Settings.Title' name=actor.name}}</h2>

  {{!-- Character Stats --}}
  <div class="spellbook-stats">
    <p>{{localize 'SPELLBOOK.Cantrips.ActorStats' name=actor.name count=stats.currentCount max=stats.maxCantrips}}</p>
  </div>

  {{!-- Cantrip Settings --}}
  <div class="settings-section cantrip-settings">
    <h3>{{localize 'SPELLBOOK.Cantrips.SectionTitle'}}</h3>

    <div class="form-group">
      <label>{{localize 'SPELLBOOK.Cantrips.RulesLabel'}}</label>
      <div class="form-fields">
        <select name="cantripRules">
          <option value="{{CANTRIP_RULES.LEGACY}}"
            {{#if (eq cantripSettings.rules CANTRIP_RULES.LEGACY)}}selected{{/if}}>
            {{localize 'SPELLBOOK.Cantrips.RulesLegacy'}}
          </option>
          <option value="{{CANTRIP_RULES.MODERN_LEVEL_UP}}"
            {{#if (eq cantripSettings.rules CANTRIP_RULES.MODERN_LEVEL_UP)}}selected{{/if}}>
            {{localize 'SPELLBOOK.Cantrips.RulesModernLevelUp'}}
          </option>
          <option value="{{CANTRIP_RULES.MODERN_LONG_REST}}"
            {{#if (eq cantripSettings.rules CANTRIP_RULES.MODERN_LONG_REST)}}selected{{/if}}
            {{#unless isWizard}}disabled{{/unless}}>
            {{localize 'SPELLBOOK.Cantrips.RulesModernLongRest'}}
            {{#unless isWizard}}({{localize 'SPELLBOOK.Cantrips.WizardOnly'}}){{/unless}}
          </option>
        </select>
      </div>
      <p class="hint">{{localize 'SPELLBOOK.Cantrips.RulesHint'}}</p>
    </div>

    <div class="form-group">
      <label>{{localize 'SPELLBOOK.Cantrips.EnforcementLabel'}}</label>
      <div class="form-fields">
        <select name="enforcementBehavior">
          <option value="{{ENFORCEMENT_BEHAVIOR.UNENFORCED}}"
            {{#if (eq cantripSettings.behavior ENFORCEMENT_BEHAVIOR.UNENFORCED)}}selected{{/if}}>
            {{localize 'SPELLBOOK.Cantrips.BehaviorUnenforced'}}
          </option>
          <option value="{{ENFORCEMENT_BEHAVIOR.NOTIFY_GM}}"
            {{#if (eq cantripSettings.behavior ENFORCEMENT_BEHAVIOR.NOTIFY_GM)}}selected{{/if}}>
            {{localize 'SPELLBOOK.Cantrips.BehaviorNotifyGM'}}
          </option>
          <option value="{{ENFORCEMENT_BEHAVIOR.ENFORCED}}"
            {{#if (eq cantripSettings.behavior ENFORCEMENT_BEHAVIOR.ENFORCED)}}selected{{/if}}>
            {{localize 'SPELLBOOK.Cantrips.BehaviorEnforced'}}
          </option>
        </select>
      </div>
      <p class="hint">{{localize 'SPELLBOOK.Cantrips.EnforcementHint'}}</p>
    </div>
  </div>

  {{!-- Always show this option, even if not currently detected as wizard --}}
  <div class="settings-section class-settings">
    <h3>{{localize 'SPELLBOOK.Settings.ClassSettingsTitle'}}</h3>

    <div class="form-group">
      <label>{{localize 'SPELLBOOK.Settings.ForceWizardMode'}}</label>
      <div class="form-fields">
        <input type="checkbox" name="forceWizardMode" {{#if forceWizardMode}}checked{{/if}}>
      </div>
      <p class="hint">{{localize 'SPELLBOOK.Settings.ForceWizardModeHint'}}</p>
    </div>
  </div>

  {{!-- Wizard Settings (only show if actor is a wizard) --}}
  {{log 'DEBUG' isWizard}}
  {{#if isWizard}}

    <div class="settings-section wizard-settings">
      <h3>{{localize 'SPELLBOOK.Wizard.SectionTitle'}}</h3>

      <div class="form-group">
        <label>{{localize 'SPELLBOOK.Wizard.StartingSpellsLabel'}}</label>
        <div class="form-fields">
          <input type="number" name="wizardStartingSpells" value="{{wizardSettings.startingSpells}}" min="0" max="20">
        </div>
        <p class="hint">{{localize 'SPELLBOOK.Wizard.StartingSpellsHint'}}</p>
      </div>

      <div class="form-group">
        <label>{{localize 'SPELLBOOK.Wizard.SpellsPerLevelLabel'}}</label>
        <div class="form-fields">
          <input type="number" name="wizardSpellsPerLevel" value="{{wizardSettings.spellsPerLevel}}" min="0" max="10">
        </div>
        <p class="hint">{{localize 'SPELLBOOK.Wizard.SpellsPerLevelHint'}}</p>
      </div>

      <div class="form-group">
        <label>{{localize 'SPELLBOOK.Wizard.RitualCastingLabel'}}</label>
        <div class="form-fields">
          <input type="checkbox" name="wizardRitualCasting" {{#if wizardSettings.ritualCasting}}checked{{/if}}>
        </div>
        <p class="hint">{{localize 'SPELLBOOK.Wizard.RitualCastingHint'}}</p>
      </div>
    </div>
  {{/if}}

  <div class="form-group">
    <button type="submit" name="submit" class="submit-button">
      <i class="fas fa-save"></i> {{localize 'SPELLBOOK.Settings.SaveButton'}}
    </button>
  </div>
</div>
